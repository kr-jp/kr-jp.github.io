<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„É°„É¢Â∏≥</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            background: transparent;
        }
        
        .memo-container {
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .memo-header {
            background: linear-gradient(to right, #f5f5f5, #fafafa);
            padding: 12px 16px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .memo-title {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0;
            font-size: 15px;
            font-weight: 600;
            color: #424242;
        }
        
        .memo-buttons {
            display: flex;
            gap: 8px;
        }
        
        .memo-button {
            padding: 5px 12px;
            border: 1px solid #ddd;
            border-radius: 3px;
            background: white;
            cursor: pointer;
            font-size: 13px;
            color: #666;
            transition: all 0.2s;
            font-family: inherit;
        }
        
        .memo-button:hover {
            background: #f5f5f5;
            border-color: #bbb;
        }
        
        .clear-button {
            color: #d32f2f;
            border-color: #ffcdd2;
        }
        
        .clear-button:hover {
            background: #ffebee;
            border-color: #ef5350;
        }
        
        .memo-body {
            padding: 16px;
        }
        
        .memo-textarea {
            width: 100%;
            min-height: 180px;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 3px;
            font-size: 14px;
            line-height: 1.6;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.2s;
        }
        
        .memo-textarea:focus {
            outline: none;
            border-color: #1976d2;
            box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
        }
        
        .memo-footer {
            padding: 12px 16px;
            background: #fafafa;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #757575;
        }
        
        .memo-info {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .save-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #2e7d32;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .save-indicator.show {
            opacity: 1;
        }
        
        .char-count {
            color: #9e9e9e;
        }
    </style>
</head>
<body>
    <div class="memo-container">
        <div class="memo-header">
            <h3 class="memo-title">
                <span>üìù</span>
                <span>„É°„É¢Â∏≥</span>
            </h3>
            <div class="memo-buttons">
                <button class="memo-button" onclick="downloadMemo()" title="„ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ">
                    üíæ „É°„É¢„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
                </button>
                <button class="memo-button clear-button" onclick="clearMemo()" title="„É°„É¢„ÇíÂâäÈô§">
                    üóëÔ∏è ÂâäÈô§
                </button>
            </div>
        </div>
        
        <div class="memo-body">
            <textarea 
                class="memo-textarea" 
                id="memoText" 
                placeholder=""
                oninput="saveMemo()"></textarea>
        </div>
        <!-- „Äå„Åù„Åì„ÇíÂãï„Åã„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ‰ªä„Åã„Çâ„ÅäËøé„Åà„Å´„Åæ„ÅÑ„Çä„Åæ„Åô„ÄÇ„Äç„Å®„ÅÑ„ÅÜ„Éâ„É©„Éû„ÅÆÂè∞Ë©û„Åå„ÅÇ„Å£„Åü„ÄÇÁßÅ„ÅÆÊØçË™û„Å†„Å®„Äå„Åù„Åì„ÅßÂãï„Åã„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„Äç„ÅÆÊñπ„ÅåËá™ÁÑ∂„ÄÇ„ÄéÊñ∞ÊòéËß£ÂõΩË™ûËæûÂÖ∏„ÄèÔºàÁ¨¨ÂÖ´ÁâàÔºâ„ÅÆ„ÄåÂãï„Åè„Äç„ÅÆË¶ãÂá∫„Åó„ÇíË¶ã„Çã„Å®„ÄÅ„ÄåÂä©„Åë„ÅåÊù•„Çã„Åæ„Åß„Åù„Åì„Çí‚Äï„ÄîÈõ¢„Çå„Çã„Äï„Å™„Äç„ÅåÁî®‰æã„Å´„ÅÇ„Çã„ÄÇ -->
        
        <div class="memo-footer">
            <div class="memo-info">
                <span>üí°</span>
                <span>„É°„É¢„ÅØ„ÅîËá™Ë∫´„ÅÆ„Éë„ÇΩ„Ç≥„É≥„ÇÑ„Çπ„Éû„Éõ„Å™„Å©„ÅÆ„Ç¶„Çß„Éñ„Éñ„É©„Ç¶„Ç∂„Å´„ÅÆ„Åø‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ</span>
            </div>
            <div style="display: flex; gap: 12px; align-items: center;">
                <span class="char-count" id="charCount">0ÊñáÂ≠ó</span>
                <span class="save-indicator" id="saveIndicator">
                    <span>‚úì</span>
                    <span>‰øùÂ≠ò„Åó„Åæ„Åó„Åü</span>
                </span>
            </div>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'mkdocs_memo_' + window.location.pathname;
        const textarea = document.getElementById('memoText');
        const saveIndicator = document.getElementById('saveIndicator');
        const charCount = document.getElementById('charCount');
        let saveTimeout;

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´‰øùÂ≠ò„Åï„Çå„Åü„É°„É¢„ÇíË™≠„ÅøËæº„ÇÄ
        function loadMemo() {
            const savedMemo = localStorage.getItem(STORAGE_KEY);
            if (savedMemo) {
                textarea.value = savedMemo;
                updateCharCount();
            }
        }

        // „É°„É¢„Çí‰øùÂ≠ò
        function saveMemo() {
            const text = textarea.value;
            localStorage.setItem(STORAGE_KEY, text);
            updateCharCount();
            
            // ‰øùÂ≠òÂÆå‰∫Ü„ÅÆË°®Á§∫
            clearTimeout(saveTimeout);
            saveIndicator.classList.add('show');
            saveTimeout = setTimeout(() => {
                saveIndicator.classList.remove('show');
            }, 1500);
        }

        // ÊñáÂ≠óÊï∞„ÇíÊõ¥Êñ∞
        function updateCharCount() {
            const count = textarea.value.length;
            charCount.textContent = count.toLocaleString('ja-JP') + 'ÊñáÂ≠ó';
        }

        // „É°„É¢„ÇíÂâäÈô§
        function clearMemo() {
            if (confirm('„É°„É¢„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü\n\n„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ')) {
                textarea.value = '';
                localStorage.removeItem(STORAGE_KEY);
                updateCharCount();
                
                saveIndicator.querySelector('span:last-child').textContent = 'ÂâäÈô§„Åó„Åæ„Åó„Åü';
                saveIndicator.classList.add('show');
                setTimeout(() => {
                    saveIndicator.classList.remove('show');
                    setTimeout(() => {
                        saveIndicator.querySelector('span:last-child').textContent = '‰øùÂ≠ò„Åó„Åæ„Åó„Åü';
                    }, 300);
                }, 2000);
            }
        }

        // „ÉÜ„Ç≠„Çπ„Éà„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
        function downloadMemo() {
            const text = textarea.value;
            if (!text.trim()) {
                alert('„É°„É¢„ÅåÁ©∫„Åß„Åô„ÄÇ');
                return;
            }
            
            const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            const date = new Date().toISOString().slice(0, 10);
            a.href = url;
            a.download = `memo_${date}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // ÂàùÊúüÂåñ
        loadMemo();
    </script>
</body>
</html>